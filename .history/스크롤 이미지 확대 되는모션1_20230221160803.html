<!DOCTYPE html>
<html lang="ko">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, target-densitydpi=medium-dpi" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="x-rim-auto-match" content="none" />
    <link rel="shortcut icon" href="./images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../assets/css/slick.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/common.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/main.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/sub.css" />
    <title>테스트</title>
    <script src="../assets/js/jquery-3.3.1.min.js"></script>
    <script src="../assets/js/jquery-ui.min.js"></script>
    <script src="../assets/js/slick.min.js"></script>
    <script src="../assets/js/gsap.js"></script>
    <script src="../assets/js/gsap_scroll_trigger.js"></script>
    <script src="../assets/js/green.js"></script>
    <script src="../assets/js/common.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/sub.js"></script>
</head>

<style>
    section {
        width: 100vw;
        height: 100vh;
    }

    section.s0 {
        background: red;
    }
    
    
</style>

<body>
    <section class="s0">

    </section>

    <section class="s1">
        <ul>
            <li class="panel s1-1 panel_first">
                <div>
                    <img src="./images/1.jpg" alt="">
                </div>
            </li>
            <li class="panel s1-2">
                <div>
                    <img src="./images/2.jpg" alt="">
                </div>
            </li>
            <li class="panel s1-3">
                <div>
                    <img src="./images/3.jpg" alt="">
                </div>
            </li>
            <li class="panel s1-4">
                <div>
                    <img src="./images/4.jpg" alt="">
                </div>
            </li>
            <li class="panel s1-5">
                <div>
                    <img src="./images/5.jpg" alt="">
                </div>
            </li>
            <li class="panel s1-6">
                <div>
                    <img src="./images/6.jpg" alt="">
                </div>
            </li>            
        </ul>
    </section>
    <section class="s0"></section>


    <script>

        const $ul = $('ul');
        const $li = $('ul li');
        const li_cnt = $('ul li').length;
        const window_height = $(window).height();
        const img = ($(window).height()- 782)/2;        
        

        $li.each((i, e) => {
            $(e).css("transform", "translateY(" + i * 15 + "px) scale(" + (1 - (0.1 * (i * (2)))) + ")");
            $(e).css("opacity", 1 - (0.1 * (i * (2))));
            $(e).attr("filter", "grayscale(" + i * 33 + "%);");
        });



        $(function () {

            gsap.registerPlugin(ScrollTrigger);

            let panels = gsap.utils.toArray(".panel");
                

            let tl1 = gsap.timeline({                
                scrollTrigger: {
                    trigger: 'section.s1',
                    start: "center center",
                    end: "+="+img*15,
                    pin: true,
                    scrub: true,
                    markers: true,
                }
            });

            
            
            
            panels.forEach((panel, i, p) => {                 
                tl1.to(p[i], { 
                    duration: 2,
                    yPercent: -150,
                }).to(p[i+1], {
                    duration: 2,
                    y: 0,
                    opacity:1,
                    scale:1,
                },"<").to(p[i+2], {
                    duration: 2,
                    y: 15+"px",
                    opacity:0.8,
                    scale:0.8,
                },"<").to(p[i+3], {
                    duration: 2,
                    y: 30+"px",
                    opacity:0.6,
                    scale:0.6,
                },"<").to(p[i+4], {
                    duration: 2,
                    y: 45+"px",
                    opacity:0.4,
                    scale:0.4,
                },"<").to(p[i+5], {
                    duration: 2,
                    y: 60+"px",
                    opacity:0.2,
                    scale:0.2,
                },"<");
                                                        

            });
            
            
            

        });

    </script>
</body>

</html>